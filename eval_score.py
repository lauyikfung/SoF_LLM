# CopyRight: Yifeng Liu - IIIS, Tsinghua University
# Please cite this github repository when using or editing the following code (except call_api function).

import os
from openai import OpenAI
import time
from tqdm import tqdm
from threading import Thread
def call_api(messages,model_id,temperature=0.3, max_tokens=0, stop=["OPENAI_STOP_TOKEN"]):
  
    client = OpenAI(api_key="YOUR_API_KEY",
                        base_url="OPENAI_URL")
    response = client.chat.completions.create(
        model=model_id,
        messages=messages,
        max_tokens=max_tokens,
        temperature=temperature,
        stop=stop,
        top_p=0,
        seed=0,
    )
    return response.choices[0].message.content

def get_response(msg):
  messages = [
      {'role':'user', 'content':msg},
  ]
  
  return call_api(messages,model_id="GPT-MODEL",temperature=0, max_tokens=2048).strip()




def threading_query(datasets, BATCH_SIZE = 48, SLEEP_TIME = 0.4, ERROR_LENGTH = 5, query_function = get_response, dump_dir = None):
  # A temporary list to store the generation results
  output_list = ["" for i in range(BATCH_SIZE)]
  translated = []
  # The target function for multi-threading
  def target(prompt, num, base_num):
      time.sleep(num * SLEEP_TIME)
      output_list[num] = ""
      outputs = ""
      try:
          outputs = query_function(prompt).strip()
          if not isinstance(outputs, str):
              print("error type", num+base_num)
              outputs = "ERROR"
          elif len(outputs) < ERROR_LENGTH:
              print("error length", num+base_num)
              outputs = "ERROR"
      except Exception as e:
          print("error!", num+base_num)
          outputs = "ERROR"
      output_list[num] = outputs

  datasets = [datasets[i : i + BATCH_SIZE] for i in range(0, len(datasets), BATCH_SIZE)]

  base_num = 0
  for row_idx in tqdm(range(len(datasets))):
      row = datasets[row_idx]
      len_row = len(row)
      input_list = row
      thread_list = [Thread(target=target, daemon=True, name=str(i), kwargs={"prompt":item, "num":i, "base_num":base_num}) for i, item in enumerate(input_list)]
      [thread.start() for thread in thread_list]
      [thread.join() for thread in thread_list]
      [translated.append(output_list[i]) for i in range(len_row)]
      base_num += len_row
  return translated
import jsonlines

eval_template = """高考作文评价标准：
内容20分：
等级：一等（20-17分）
标准：切合题意（在材料内容及含义范围内行文），中心突出（有中心句点明文章主旨），内容充实（字数达到800字或更高），感情真挚（行文合情入理）
等级：二等（16-12分）
标准：符合题意（在材料内容及含义范围内行文），中心明确（围绕主题构思行文），内容较充实（字数达到800字或更高），感情真挚（行文朴实，不造作）
等级：三等（11-7分）
标准：基本符合题意（尚能把握高考作文材料含义，但行文中有所游离），中心基本明确（尚有中心，但部分高考作文材料游离中心之外），内容单薄（字数在800字附近或低于800字），感情基本真实
等级：四等（6-0分）
标准：偏离题意（仅抓高考作文材料中枝节意义行文、就事论事），中心不明确（缺少中心句或者没有明确的主题），内容不当，感情虚假或者思想不健康
表达20分：
等级：一等（20-17分）
标准：符合议论文文体要求，结构严谨（首尾呼应，文脉畅通，段落划分恰当，衔接紧凑，过渡自然），语言流畅（用规范的现代汉语写作，用词准确，句与句之间衔接自然，句式选择得当）
等级：二等（16-12分）
标准：基本符合议论文文体要求，结构完整（有头有尾，分段合理），语言通顺（文从字顺，有一到两处语病，但不影响语意表达）
等级：三等（11-7分）
标准：大体符合议论文文体要求（有文体杂糅痕迹，但尚能分辨出文体类型），结构基本完整（有头有尾，段落划分不够合理），语言基本通顺（有三到四处语病，对语意表达并无很大影响）
等级：四等（6-0分）
标准：不符合议论文文体要求，结构混乱（段落划分有严重缺陷，杂乱无章），语言不通顺，语病多（语病达5处以上，影响了语意表达）
发展等级20分：
1、深刻：①透过现象看本质②揭示事物内在的因果关系③观点具有启发作用
2、丰富：④材料丰富⑤论据充足⑥形象丰满⑦意境深远
3、有文采：⑧用词贴切⑨句式灵活⑩善于运用修辞手法⑾文句有表现力
4、有创意：⑿见解新颖⒀材料新鲜⒁构思精巧⒂推理想象有独到之处⒃有个性特征
【注意事项】
1、根据表达项的细则，在“内容”评等的基础上，除了在相应的等级上评分外，还可以考虑在上一等或下一等打分。
2、发展等级分原则上随内容或表达的等次给分，，如内容二等，表达三等，发展等级一般可在二等或三等给分。
3、在切合题意的前提下，凡说理表达基本过关、观点基本突出、材料基本充实的议论类文章，可以按48—52分档次赋分。
4、考虑到议论类文章的立意，多为解释“提示语”（材料）的文章，因此，凡能采取比较新颖的角度切入“材料”，解说“提示语”的内涵与精神，便可视为有亮点，可以提高档次给分。
5、有如下情景即可视为有亮点，可以在52分向上判：选取比较新颖、生动、有个性的材料作论据，而不是尽人皆知的“通常事例”；所用事例材料能够有论证层次，并不平面展开，不机械重复，每一例都能显示一个小论点或层层递进的。
6、整体上，采用分项评价整体给分的评分方法。也就是说，在阅卷赋分时要从立意、内容、语言、文体或基础等级和发展等级分项全面考虑。
7、注意文体意识。需要写成议论类文章，议论的文字必须超过2/3。否则，视为文体不明，降低1~2个档次。
8、完篇而字数不足，正常打分之后，再扣字数分。每少50字扣1分，扣满3分为止，字数较少的内容层次可以适当降低1至2档评分。明显未完篇的文章，最高不超过35分。未完篇的文章，不再扣字数不足分。
9、每3个错别字扣1分，重复不计，扣满5分为止。
10、文章中有“首先”、“其次”、“再次”、“最后”、“第一”、“第二”、“第三”等词语辅助进行段落连接，需要降低一些得分。
11、文章中如果有文言文式的表述，以及大量引用古诗词，使得文章具有书卷气息，可以提高一些得分；引用较多的，表达和发展等级可以提高一档。
12、如果文章就事论事，仅仅围绕给定材料展开叙述而不拓展到包括但不限制于实际生活、社会、历史或者个人体验等其他方面，需要下调一些分数，可以降低表达和发展等级评分。
13、要多发现文章中的漏洞之处，严格评判。除非文章完全符合所有优秀作文标准且超乎常人，否则总得分在36至57分之间，每个方面一般不会得到19分以上的评分，每条不足之处可以扣2至3分，每条存在进步空间的地方可以扣1至3分。

高考优秀作文标准：
切合题意，中心突出（有中心句点明文章主旨），内容充实，（占比10分）感情真挚、材料丰富（多引用实际生活、社会、历史或者个人体验等案例）、形象丰满、意境深远（占比10分）；
需要写议论文，语言优美、生动（多用文言文式的表述使得文章具有书卷气息）且语言流畅（用规范的现代汉语写作，用词准确，句与句之间衔接自然，句式选择得当），句式灵活，（占比12分）善于运用修辞方法，文句有意蕴（多用比喻、排比、夸张、反问和其他修辞手法，多引用名人名言、诗词和名人案例）（占比8分）；
结构严谨（首尾呼应，文脉畅通，段落划分恰当，衔接紧凑，过渡自然）、透过现象深入本质、揭示问题产生根源、观点具有启发作用（总分总），（占比10分）见解新颖、材料新鲜、构思精巧，推理、想象有独到之处，有个性特征，少有不足之处（每条缺陷可以扣2至3分，每条存在进步空间的地方可以扣1至3分）（占比10分）。
基于以下题目，参照上面给出的参考评分样例中的参考回答，根据以上高考评分标准、注意事项和优秀作文标准，以及题目0评价范文0的得分（范文0总共[[WC]]字，[[WC_RESULT]]）。请按以上标准逐条深入、详细地分析范文0，要多发现文章中的漏洞之处，严格评判，需要结合文章的内容分析语言和细节，并且内容、表达和发展每一个方面都需要给出一个确定的分数而不是区间。用json的形式返回你的分析和评分（确定的分数而不是区间），其中有且只有两个关键字："analysis"和"result"。"analysis"是你的分析过程，是个字符串列表，包含了字数分析、内容（逐段分析文章内容，并总结内容上的有点和缺点，给出具体的得分）、表达（从文章的结构、语言、修辞、问题、逻辑、层次等角度进行分析，根据内容等级的判分和表达方面的表现给出评分）、发展（深入分析文章的表达、论证、语言、修辞、表现力、创新性、观点新颖性、推理严谨性等等，根据内容和表达等级综合评价得分）、扣分项（没有标题扣2分，字数不足按规定扣分，错别字、标点符号有误一处扣一分）和计算总分（三个方面的总分减去扣分项）这六个方面的分析各自的字符串；"result"是一个整数而不是字符串。
题目0：
[[TIMU0]]
范文0：
[[FANWEN0]]
参考评分样例：
题目1：
根据以下材料，选取角度，自拟题目，写一篇不少于800字的文章；文体不限，诗歌除外。
俗话说，有话则长，无话则短。有人却说，有话则短，无话则长——别人已说的我不必再说，别人无话可说处我也许有话要说。有时这是个性的彰显，有时则是创新意识的闪现。
范文1：
标题：沉默是金
在这个喧嚣纷扰的时代，沉默如同一股清流，它不仅仅是一种选择，更是一种艺术。沉默的价值，在于它能够让我们在这快节奏的生活中，找到一片宁静的港湾，让我们有机会沉淀思绪，审视自我。正如诗人泰戈尔所言：“沉默是一种语言，它的深度和力量，往往胜过千言万语。”在人际交往中，沉默可以是一种策略，一种智慧，甚至是一种力量。
沉默的智慧，首先体现在它能够让我们避免冲动。在情绪激动时，沉默可以作为一种缓冲，让我们有机会冷静下来，避免在愤怒或激动的情绪下做出可能会后悔的决定。这种沉默，是一种自我控制的体现，它教会我们在面对挑战时，如何保持冷静和理智。
然而，沉默并非总是沉默寡言，它也可以是一种深刻的表达。在某些情况下，沉默本身就是一种强烈的立场和态度。比如，在面对不公正和压迫时，沉默可能意味着无声的抗议，是一种无声的呐喊。在这种情况下，沉默不再是逃避，而是一种有力的抵抗。
在沟通的艺术中，沉默同样重要。它是一种非言语的沟通方式，能够传达出我们对对方的尊重和理解。在对话中，适时的沉默可以让对方感受到我们的倾听和重视，有助于建立信任和理解。但同时，沉默也需要适度，过度的沉默可能会导致误解和隔阂，使得沟通变得困难。
在现代社会，我们应该学会在沉默与表达之间找到平衡。在需要深思熟虑时，沉默是我们的朋友；在需要表达立场时，我们则应该勇敢发声。这种平衡，要求我们具备敏锐的洞察力和判断力，能够在不同的情境中，做出最合适的选择。
沉默的价值，还在于它能够激发我们的创造力。在沉默中，我们的思维不受外界干扰，可以自由地飞翔，迸发出新的灵感和创意。许多伟大的思想和艺术作品，都是在沉默中孕育而生。正如爱因斯坦所说：“我思考的时间比说话的时间多。”沉默给了我们思考的空间，让我们能够深入探索未知的领域。
总之，沉默是一种多面的社会现象，它既有其积极的价值，也有其潜在的风险。我们应该学会在不同的情境下，灵活运用沉默，既不让它成为沟通的障碍，也不让它成为逃避责任的借口。在沉默与表达的天平上，我们需要不断地调整和平衡，以确保我们的行为既不失智慧，又不失勇气。这样，我们才能在复杂的人际关系中，游刃有余，成为真正的智者。
参考回答1：
{
"analysis":
[
"字数分析：范文1的总字数为897字，符合800字的最低要求，因此在字数方面无需扣分。",
"内容分析：范文以“沉默是金”为题，紧扣题目要求，围绕材料中提出的“沉默”这一概念进行了深入探讨。文章开头即引用泰戈尔的名言：“沉默是一种语言，它的深度和力量，往往胜过千言万语。”这句引言不仅为沉默的价值定调，而且直接回应了题目中关于沉默的双重性，即沉默可以是个性彰显，也可以是创新意识的闪现。通过这一引用，文章立即建立起对沉默深层次理解的基调，显示了作者对题目的深刻把握。然而，文章在探讨沉默的价值时，虽然覆盖了避免冲动、深刻表达、沟通艺术和创造力四个方面，但在某些部分的深度和广度上仍有不足，深度和广度方面需要各扣掉2分，共4分。例如，在讨论沉默在避免冲动方面的作用时，文章提到“沉默可以作为一种缓冲，让我们有机会冷静下来”，这句话虽然准确指出了沉默的功能，但未能进一步探讨在不同情绪波动下，如何有效地运用沉默作为自我调节的工具，以及如何在实际情境中辨识何时沉默才是最佳选择。在“沟通艺术”部分，文章指出“适时的沉默可以让对方感受到我们的倾听和重视”，这句话成功捕捉了沉默在人际交流中的积极作用，展示了沉默如何成为有效沟通的一部分。然而，这一部分仍待进一步拓展，探讨沉默如何在不同文化背景下被解读，以及在跨文化交流中沉默的意义可能发生的变化，不足之处需要扣掉2分。此外，文章虽然提及了沉默的潜在风险，如“过度的沉默可能会导致误解和隔阂”，但未深入分析如何平衡沉默与表达，以及如何识别沉默可能产生负面影响的情境，需要扣掉2分的缺陷分。文章通过引用名人名言和具体实例来强化论点，如引用爱因斯坦的话“我思考的时间比说话的时间多”，旨在强调沉默给予思考的空间，突出沉默与创造力之间的联系，有效地提升了文章的说服力。总体来说，文章在内容方面符合二等作文的标准，得分12分。",
"表达分析：文章的结构严谨，逻辑清晰，从引言到结尾，每个部分都有明确的主题和支撑点。例如，文章开头通过引用泰戈尔的名言“沉默是一种语言，它的深度和力量，往往胜过千言万语”，不仅为沉默的价值定调，而且巧妙地引入了文章的主题。这种开头方式有效地吸引了读者的注意，同时立即建立了沉默的重要性。在论述“沉默的智慧”时，文章通过具体的例子，如“在情绪激动时，沉默可以作为一种缓冲”，来展示沉默在情绪管理中的作用。这种具体与抽象相结合的方式，使得论证更加生动有力。不过，文章在展开这些分论点时，缺乏进一步深化分析，例如通过引入心理学研究或实验数据来支撑沉默作为情绪管理工具的有效性，从而增强论证的科学性和说服力。文章在语言运用上，如“沉默如同一股清流”，运用了比喻手法，增强了语言的形象性和感染力。这类生动的比喻使文章的表述更加富有诗意，能够深刻打动读者。然而，文章在使用修辞手法时，可以更加多样化，例如加入对比、排比等修辞，以丰富文章的表现形式和增强文章的节奏感。此外，文章在表达上还体现了一定的文采，如在探讨沉默与创造力的关系时，引用了爱因斯坦的话“我思考的时间比说话的时间多”。这不仅丰富了文章的内容，也提升了文章的文化层次。文章可以在这一方面做得更好，通过引入更多领域的名人名言和案例，如艺术、哲学等，来展现沉默在不同领域中的普遍价值和意义，需要扣掉2分。在内容等级判分的基础上，表达项可以在二等至三等给分。由于内容评分为13分，属于二等，表达项原则上不跨等给分，因此表达项的评分应在一等到三等之间。综合考虑文章在结构、语言和修辞方面的整体表现，最终确定为一等得分，得分：18分。",
"发展分析：文章在深刻性、丰富性、文采和创意方面表现良好，展现了作者对沉默这一主题的深入理解和独到见解。在深刻性方面，文章不仅停留在沉默的表面意义，而是深入探讨了沉默在不同情境下的多重价值。例如，文章提到“沉默可以是一种策略，一种智慧，甚至是一种力量”，这表明作者能够透过现象看本质，理解沉默背后的深层含义。在丰富性方面，文章通过引用泰戈尔和爱因斯坦的话，以及对沉默在人际交往、个人思考中的应用，展示了沉默的多面性，使得文章内容更加立体。文采方面，文章运用了比喻、引用等修辞手法，如“沉默如同一股清流”，增强了语言的艺术感，使得文章读起来更加生动和引人入胜。在创意方面，文章将沉默与现代社会的沟通艺术相结合，提出了在沉默与表达之间寻找平衡的观点，这显示了作者的创新思维。然而，文章在推理和想象方面的表现尚显不足，例如，可以进一步探讨沉默在现代社会中的新应用，或者通过更丰富的案例来支持观点，推理和想象方面的不足需要各扣掉2分，共4分。总体来说，文章在发展等级方面可以给予二等到三等的评分。因此，发展得分：16分。",
"扣分项分析：范文1没有出现错别字、标点符号错误等明显问题，且文章有标题。字数符合要求，无需扣分。",
"计算总分：综上，内容12分，表达18分，发展16分，总分：46分。"
],
"result": 46
}
题目2：
阅读下面的材料，根据要求写作。（60分）
烟火气是家人团坐，灯火可亲；烟火气是国泰民丰，岁月安好；烟火气是温情，是祥和，需要珍惜和守护，也需要奉献和担当。寻常烟火，就是最美的风景。
你对这段话有怎样的思考和感悟？请结合自身体验，写一篇文章。
要求：①自选角度，自拟标题； ②文体不限（诗歌除外），文体特征明显；
③不少于800字；④不得抄袭，不得套作。
范文2：
人间烟火气，是生命的馈赠
“固知一死生为虚诞，齐彭殇为妄作”，人生匆匆，而人间的烟火气，是生命的馈赠。
“暖暖远人村，依依墟里烟”，烟火气是人生自得，快然自足。陶渊明不愿为五斗米折腰，挂印归田园。他远离了官场，却留住了难得的烟火气，成了那个“带月荷锄归”的农夫，成了那个“但识琴中趣，何劳弦上声”的雅人。在一抹黄昏眷恋着大地的时候，他吟唱着诗句，步履悠闲地踏进院子，烟火气给予了他与众不同的清闲与旷达！烟火气给我们带来了汪洋恣肆的陶潜，还给我们送来了“一蓑烟雨任平生”的苏轼。苏轼一生多次被贬，是人间烟火气支撑着他走了下去。“日啖荔枝三百颗，不辞长作岭南人”，在逆境中，他活得有趣，过得旷达。平淡是真，安乐是福，“人间有味是清欢”。
“白日放歌须纵酒，青春作伴好还乡”，烟火气是在和平年代中岁月安好的象征。2021 年，经过全党全国各族人民共同努力，在迎来中国共产党成立100周年的重要时刻，我国脱贫攻坚战取得了全面胜利，烟火气因此更盛、更旺。2019年年底新冠肺炎疫情暴发，经过全国人民齐心协力、共同抗疫，我国度过了最为艰难的时期，人们不用每天提心吊胆地生活，处处散爱着难得的人间烟火气——市井繁华，人声鼎沸， 车水马龙太平盛世。
“遥望齐州九点烟， 一泓海水杯中泻”，烟火气也是国泰民安。中华人民共和国成立之初，国困民穷，而今经济繁荣，人民生活安乐。这份烟火气来之不易，它源于陈祥榕烈士“清激的爱，只为中国”，源于袁隆平耕耘稻田、不辞辛苦，源于全国上下团结奋斗，心往一处想，劲往一处使。 如今的繁荣景象弥足珍贵，我们更应珍惜、爱护，担起作为青少年的一份责任来。“山因脊而雄，屋因梁而固”，青少年有理想、有担当，才能更好地报效国家、服务社会，才能更好地守护这烟火气，也才能将这烟火气更好地传递下去。
如果你已追逐过梦想，经历过冒险，突然想念那一缕炊烟和来自家的安全感，那就回家看看，感受家人团坐时的温情；如果你已领略过山河广阔，明白个体的渺小，在人生的旅途上屡遭挫折，那就去乡村走走，看看蔚蓝的天空；如果你帆风顺，不曾为沟整所羁绊，更要去领略一下人间烟火，久行会累，让人间给你慰藉和安抚。你可以白日放歌，夜里乘凉，在棵大树下与“重智”打阁，和“黄发”讲讲鲜衣怒马，共话桑麻，在人间烟火的氤氲里安放自己的灵魂，心中留一片空地安置梦中的温柔乡。
岁月静好，现世无虑。人间的烟火，是生命的馈赠，试问谁不为之动容？
参考回答2：
{
"analysis": [
"字数分析：文章的总字数为984字，符合800字的最低要求，因此在字数方面无需扣分。",
"内容分析：文章紧扣题目要求，围绕“烟火气”这一概念进行了深入探讨。文章开头引用古人名言“固知一死生为虚诞，齐彭殇为妄作”，为烟火气的意义定调，表达了人生短暂而烟火气是真实存在的温暖。接着，文章通过陶渊明“带月荷锄归”的农夫形象和苏轼“日啖荔枝三百颗，不辞长作岭南人”的生活态度，展示了烟火气在个人生活中的重要性。这些历史人物的生活态度和经历，不仅生动形象，而且深刻地体现了烟火气对于个人精神世界的影响，使得文章内容充实，情感真挚。文章还联系了国家发展和民族精神，强调了烟火气对于国家繁荣和民族凝聚力的作用。例如，文章提到“2021年，经过全党全国各族人民共同努力，在迎来中国共产党成立100周年的重要时刻，我国脱贫攻坚战取得了全面胜利，烟火气因此更盛、更旺。”这一描述不仅展示了国家层面的进步，也体现了烟火气在社会稳定和发展中的重要作用。然而，文章在探讨烟火气在现代社会中的具体体现和如何在个人生活中实践烟火气方面略显不足，酌情扣2分。例如，文章缺少对在快节奏的现代生活中，人们如何保持和传承这种烟火气，以及如何在个人层面上实现与社会的和谐共融等内容的进一步探讨。总体来说，内容方面仅有略微不足之处，符合一等作文的标准，得分：18分。",
"表达分析：文章的结构严谨，从开头的引言到结尾的总结，每个部分都有明确的主题和支撑点。文章开头通过引用古人名言“固知一死生为虚诞，齐彭殇为妄作”，不仅为烟火气的意义定调，而且巧妙地引入了文章的主题，这种开篇方式既展示了作者深厚的文化底蕴，也为后续的论述奠定了基调。例如，文章开头的“人间烟火气，是生命的馈赠”这句话，直接回应了题目，明确了烟火气在人生中的重要地位。在语言运用上，文章采用了丰富的修辞手法，如比喻、排比等，增强了文章的表现力。例如，“暖暖远人村，依依墟里烟”和“白日放歌须纵酒，青春作伴好还乡”等诗句的运用，不仅增添了文章的书卷气，还通过诗句内容的描写，照应文段的主题形象，烘托了烟火气的可贵气氛。这些诗句的引用，使得文章在情感表达上更加生动，同时也体现了作者对传统文化的深刻理解和运用能力。文章在论证层次上，能够清晰地展现事物的内在因果关系，语言生动，句式灵活。例如，“烟火气是国泰民安”这一观点，通过“中华人民共和国成立之初，国困民穷，而今经济繁荣，人民生活安乐”的历史变迁来支撑，展示了烟火气与国家繁荣之间的紧密联系。这种论证方式不仅逻辑清晰，而且具有很强的说服力。然而，文章在表达上仍有提升空间。例如，文章可以进一步通过对比分析、因果论证等方法来增强论证的深度。在探讨烟火气在现代社会中的具体体现时，文章可以引入更多现代生活的实例，如都市生活中的烟火气如何被快节奏所稀释，以及如何在现代生活中寻找和保持这种温暖。这样的对比和分析将使文章更加贴近现实，更具时代感。总体来说，文章在表达方面表现优秀，在结构、语言和修辞方面都有很好的表现，但在论证深度和现代生活联系方面还有提升空间，酌情扣1分。综合考虑，文章在表达方面表现优秀，在内容等级判分的基础上，表达项可以在一等至二等给分。由于内容评分为19分，属于一等，表达项原则上不跨等给分，因此表达项的评分应在一等至二等之间。因此最终确定为一等得分，得分：19分。",
"发展分析：文章在深刻性、丰富性、文采和创意方面表现突出。文章观点新颖，材料选择恰当，如引用历史人物的生活态度来体现烟火气的价值。文章的构思精巧，能够从多个角度探讨烟火气的意义，体现了作者的独特见解。语言方面，文章运用了比喻、引用等修辞手法，增强了文章的艺术感，尤其是各段开头。此外，文章在推理和想象方面表现良好，展示了作者对现代社会的深刻理解和个性化的思考。文章在深刻性、丰富性、文采和创意方面表现突出。文章观点新颖，材料选择恰当，如通过历史人物的故事来体现烟火气的价值。例如，文章中提到的“陶渊明不愿为五斗米折腰，挂印归田园”和“苏轼一生多次被贬，是人间烟火气支撑着他走了下去”，这些历史人物的生活态度和经历，不仅生动形象，而且深刻地体现了烟火气在个人生活中的重要性。文章的构思精巧，能够从多个角度探讨烟火气的意义，体现了作者的独特见解。语言方面，文章运用了丰富的修辞手法，增强了文章的艺术感。例如，“烟火气是生命的馈赠”这一比喻，以及“暖暖远人村，依依墟里烟”等诗句的引用，不仅美化了文章，也使得文章的观点更加鲜明和有力。文章在推理和想象方面表现良好，展示了作者对现代社会的深刻理解和个性化的思考。例如，文章通过“烟火气是在和平年代中岁月安好的象征”这一观点，将个人情感与国家发展紧密联系起来，体现了作者对时代背景的深刻洞察。然而，文章也有一些需要改进的地方。首先，文章需要进一步深化对烟火气在现代社会中的具体体现和如何在个人生活中实践烟火气的探讨，酌情扣1分；还缺少更多现代生活的例子，如城市中的社区活动、家庭聚餐等，来具体展示烟火气在当代社会中的表现形式，这样的内容不仅能够使文章更加贴近现实，也能够激发读者的共鸣，因此需要酌情扣2分。综上所述，文章在发展等级方面可以给予一等的评分。因此，发展得分：17分。",
"扣分项分析：范文没有出现错别字、标点符号错误等明显问题，且文章有标题。字数符合要求，无需扣分。",
"计算总分：综上，内容18分，表达19分，发展17分，总分：54分。"
],
"result": 54
}
题目3：
阅读下面的文字，按照要求作文（60分）
世界似画笔下缤纷的色彩，世界如琴瑟上跳动的音符；世界因创新而进步，世界缘和谐而温馨；世界可以存在于神奇虚拟的网络，世界更演绎着平凡真实的人生；世界说起来很大，世界其实又很小……
每个人都有自己的世界，每个人都生活在世界之中。请你结合自己的体验和感悟。以“我生活的世界”为话题，写一篇文章。
要求：（1）自选角度，自拟题目；（2）除诗歌外，文体不限。（3）不少于800字。（4）写出自己的真情实感；（5）不得套作，不得抄袭。
范文3：
题目：我生活的世界
在这个多彩的世界里，我们每个人都有着自己的生活轨迹和感悟。我生活的世界，是一个充满爱与挑战的地方，它教会了我成长，也让我体会到了生活的酸甜苦辣。
首先，我生活的世界是一个充满爱的世界。家人的关爱、朋友的陪伴、老师的教导，这些都是我成长道路上不可或缺的力量。家人总是无条件地支持我，在我遇到困难时给予鼓励和帮助；朋友们在我失落时陪伴在我身边，分享彼此的喜怒哀乐；老师们则用自己的知识和智慧，为我指引方向。这些爱让我感受到了温暖，也让我更加勇敢地面对生活中的挑战。
然而，我生活的世界也是一个充满挑战的世界。从小学到大学，我经历了无数的考试和竞争，每一次都是对我的能力的考验。在这些挑战中，我学会了如何去适应环境，如何去克服困难。我学会了坚持和努力，也学会了在失败中吸取教训。这些挑战让我变得更加坚强，也让我更加珍惜那些来之不易的成功。
此外，我生活的世界还是一个充满变化的世界。科技的进步让我们的生活变得更加便捷，互联网让我们的视野变得更加开阔。我们可以轻松地获取信息，与世界各地的人们交流。这个世界的变化让我意识到，要想在这个快速变化的时代立足，就必须不断学习新知识，不断提升自己。我也在这个过程中学会了如何去适应变化，如何在变化中找到自己的位置。
最后，我生活的世界是一个真实的世界。在这里，我经历了无数的平凡日常，也见证了许多感人至深的故事。这些真实的经历让我更加深刻地理解了生活的意义，也让我更加珍惜眼前的一切。我相信，只要我们用心去感受，用心去生活，这个世界就会变得更加美好。
总之，我生活的世界是一个充满爱、挑战、变化和真实的世界。在这个世界里，我学会了成长，学会了面对困难，学会了适应变化，也学会了珍惜。我相信，只要我们勇敢地面对生活中的一切，用心去感受，用心去体验，我们的生活就会变得更加精彩。
参考回答3：
{
"analysis":
[
"字数分析：文章总字数为758字，未达到800字的要求，根据评分标准，可以按60分的满分进行内容、表达和发展方面的分析，并扣除相应字数不足的分数，即扣除1分。",
"内容分析：文章以“我生活的世界”为题，紧扣题目要求，从个人视角出发，探讨了生活中的爱、挑战、变化和真实。文章开头通过对世界的描述引入主题，如“世界似画笔下缤纷的色彩，世界如琴瑟上跳动的音符”，这些描述不仅生动形象，而且为读者描绘了一个充满色彩和活力的世界，为后续的个人感悟铺垫了背景。文章中间部分详细描述了个人生活世界中的“爱”，如“家人的关爱、朋友的陪伴、老师的教导”，这些具体的例子展示了作者在成长过程中所感受到的支持和温暖，使得文章内容更加丰富和具体。同时，作者也讨论了生活中的挑战，如“从小学到大学，我经历了无数的考试和竞争”，这些经历反映了作者面对困难时的坚持和努力，增强了文章的真实感。文章还提到了世界的变化，如“科技的进步让我们的生活变得更加便捷”，这不仅展示了作者对时代变迁的敏感性，也体现了作者对未来的积极态度。最后，作者通过“真实的世界”这一概念，强调了平凡生活中的价值，如“我经历了无数的平凡日常，也见证了许多感人至深的故事”，这些描述让读者感受到了作者对生活的深刻理解和珍惜。然而，文章在内容的深度和广度上有很大缺陷，文章字数较少，对个人经历的讨论较不详细，缺乏对个人经历如何影响了作者的世界观，如何与更广泛的社会现象相联系等话题的进一步探讨，深度和广度上的明显不足，需要扣掉各3分，共6分。情感表达虽真挚，但文章在展现个人成长与世界变化之间的内在联系方面，以及如何在个人经历中提炼出更普遍的人生哲理方面，还有待深化，需要扣掉2分。总体来说，内容方面总共扣掉8分，可以评为二等作文，得分：12分。",
"表达分析：文章的结构合理，有明确的引言、主体和结尾，语言流畅，用词恰当。文章开头即以“在这个多彩的世界里，我们每个人都有着自己的生活轨迹和感悟”作为引言，直接点题，为后续内容的展开设定了基调。主体部分通过具体的生活片段，如“家人总是无条件地支持我，在我遇到困难时给予鼓励和帮助”，展现了作者与家人、朋友、老师之间的深厚情感，这些描述增强了文章的感染力。结尾部分“总之，我生活的世界是一个充满爱、挑战、变化和真实的世界”总结了全文，呼应了开头，形成了完整的论述结构。文章在语言运用上，如“我生活的世界，是一个充满爱的世界”中的“充满爱”一词，用词贴切，形象地传达了作者对家庭温暖的感受。同时，文章在描述挑战时使用了“每一次都是对我的能力的考验”，这样的表述既准确又具有力度，体现了作者面对挑战时的积极态度。然而，文章在论证层次上略显不足，例如，在讨论挑战时，可以更深入地分析这些挑战如何塑造了作者的性格和价值观，以及这些经历如何影响了作者对未来的看法，需要酌情扣掉2分。此外，文章在语言的多样性和句式的灵活性上还有提升空间，如可以更多地使用修辞手法，如排比、对比等，以增强文章的节奏感和表现力，综合来看，需要扣掉2分。例如，“家人的关爱、朋友的陪伴、老师的教导”这一排比句式，虽然增强了语言的韵律，但在其他部分可以进一步丰富这种修辞手法的使用。在内容等级判分的基础上，表达项可以在一等至三等给分。由于内容评分为12分，属于二等，表达项原则上不跨等给分，因此表达项的评分应在一等到三等之间。综合考虑文章在结构、语言和修辞方面的整体表现，根据以上分析，表达方面扣掉4分，最终确定为二等得分，即表达得分：16分。",
"发展分析：文章在深刻性、丰富性、文采和创意方面表现一般。文章虽然提出了对世界的个人感悟，但在见解的新颖性和论证的深入性方面还有待提高。例如，文章中提到“我生活的世界，是一个充满爱的世界”，这一观点虽然真挚，但缺乏对“爱”这一主题更深层次的探讨，如爱如何影响个人价值观的形成，或者在不同文化背景下爱的表现形式和意义，需要扣掉2分。文章在透视问题本质和提出具有启发性观点方面稍显不足，如在讨论挑战时，可以进一步分析这些挑战如何促进个人成长，以及如何将个人经历与更广泛的社会现象联系起来，提出对当代青年成长的普遍建议。文章在材料选择上较为常规，如“从小学到大学，我经历了无数的考试和竞争”，这些描述虽然贴近生活，但缺乏新颖性，需要尝试引入一些独特的个人经历或者观察到的社会现象，以增加文章的吸引力，新颖性的缺陷需要扣掉2分。在形象塑造方面，文章通过“科技的进步让我们的生活变得更加便捷”等描述，展示了对科技进步的认识，但可以进一步深化对科技如何影响人际关系和社会结构的探讨，需要酌情扣掉1分。文章在文采方面表现普通，虽然语言流畅，但在修辞手法的运用上还有提升空间，也需要酌情扣掉1分。例如，文章可以更多地使用比喻、拟人等修辞手法，如将“变化”比作“时代的车轮”，增强语言的形象性和感染力。在创意方面，文章处理较为常规，缺乏独特见解，缺乏个人经历与历史事件或文化背景的结合，以及新的视角和思考，需要扣掉2分。综上，本文还有许多可以提升的空间，如作者可以在深刻性上深入挖掘个人经历背后的社会意义，在丰富性上引入更多独特的个人故事或社会现象，在文采上运用更多修辞手法增强语言魅力，在创意上尝试新的视角和思考方式。综合来看，本文的发展得分可以评分二等，即：12分。",
"其他扣分项方面，文章并没有错别字、标点符号错误的问题。但文章内容较少，总字数为758字，未达到800字的要求，需要扣掉1分。",
"综上，内容12分，表达16分，发展12分，扣掉字数不足的1分，总分：39分。"
],
"result": 39
}
题目4：
阅读下面的材料，根据要求写作。（60分）
中国共产主义青年团成立100周年之际，中央广播电视总台推出微纪录片，介绍一组在不同行业奋发有为的人物。他们选择了自己热爱的行业，也选择了事业创新发展的方向，展示出开启未来的力量。
有位科学家强调，实现北斗导航系统服务于各行各业，“需要新方法、新思维、新知识”。她致力于科技攻关，还从事科普教育，培育青少年的科学素养。有位摄影家认为，“真正属于我们的东西，是民族的，血脉的，永不过时”。他选择了从民族传统中汲取养分，通过照片增强年轻人对中国文化的认同。有位建筑家主张，要改变“千城一面”的模式，必须赋予建筑以理想和精神。他一直努力建造“再过几代人仍然感觉美好”的建筑作品。
复兴中学团委将组织以“选择·创造·未来”为主题的征文活动，请结合以上材料写一篇文章，体现你的认识与思考。
要求：选准角度，确定立意，明确文体，自拟标题；不要套作，不得抄袭；不得泄露个人信息；不少于800字。
范文4：
不负热爱，创造未来
青年强则国强，时代之希望都在青年。在中国共青团成立100周年之际，央视微纪录片记录了一组在不同行业奋发有为的人物，让我深受震撼。作为现代青年，如何才能做到奋发有为?如何才能体现出自身的价值?我认为，青年当不负自己热爱的事业，不断钻研创新，创造美好的未来！
不负热爱，就要为你的热爱做出最好的选择。
青年当选择热爱的事业，并为之付出努力，不辜负自己的热爱。因为，你的选择决定了你的生活，你的热爱注定了你走的路。当新冠肺炎疫情肆虐之时，八十多岁高龄的钟南山挺身而出，毅然决然地选择奔赴疫情的重灾区——武汉，不仅是因为大爱无私，还因为自己热爱的医疗事业。苏炳添选择了百米短跑项目，就不断地为之奋斗，当遇到瓶颈时，大胆决定更换起跑脚。经过多年奋斗，苏炳添终于在东京奥运会上超越了年龄和伤病，更超越了自己，取得了不起的成绩。你问他，苦吗？当然！累吗？的确！无论是钟南山，还是苏炳添，他们都不后悔，他们选择了热爱，为了热爱全身心投入。
因为热爱，就要不断地创造，开拓更广阔的未来。
青年当追求创造，只有心无旁骛，不断创造，未来才是光明的。袁隆平说他的心中一直有两个梦，一个梦是禾下乘凉，另一个梦是杂交水稻覆盖全球。他用-生去实现这两个梦想，专心致志，不断创新，最终成功培有出杂交水稻，提高了水稻的亩产量。他用热爱点燃生命，用创造照亮前路。中华人民共和国成立后，39岁的于敏开启了他的研究生涯，100多天里，他夙兴夜寐，常常半跪在地上分析堆积如山的数据纸，终于成功实现了氢弹原理的突破，帮助祖国实现科技自强。由此可见，不断创造，才能让路越走越宽；不断创新，才会有更美好的未来。
“青年胸无大志，则国之光明不可期；青年热血沸腾，奋发有为，则国之未来无限光明。”这不仅是对青年的期待，更是对我们这一代的挑战和激励。我们应该在选择中坚定，在创造中勇敢，以青春之我创造青春之国，以青春之国展现青春之梦。
在青春的征途上，让我们不负韶华，不负热爱，共同创造一个辉煌灿烂的未来。愿每一位青年都能在追梦的路上留下坚定而鲜明的足迹，共同书写属于我们这个时代的华彩篇章。
愿诸位共勉！
参考回答4：
{
"analysis":
[
"字数分析：范文1的字数共871字，符合800字的最低要求，因此在字数方面无需扣分。",
"内容分析：范文0紧扣题目要求，围绕“选择·创造·未来”主题展开。文章开头以“青年强则国强，时代之希望都在青年”开篇，通过对中国共青团成立100周年的背景介绍，引出主题，展示了作者对青年奋发有为的认识。例如，文章中提到“作为现代青年，如何才能做到奋发有为?如何才能体现出自身的价值?我认为，青年当不负自己热爱的事业，不断钻研创新，创造美好的未来！”这句话直接回应了题目，明确了青年在国家发展中的重要角色和应承担的责任。文章中间部分通过具体人物的例子，如钟南山、苏炳添、袁隆平和于敏，展示了他们如何通过热爱和创造影响未来，强调了不断创造才能够开拓更广阔的未来的观点。例如，文章中描述钟南山“挺身而出，毅然决然地选择奔赴疫情的重灾区——武汉”，以及苏炳添“大胆决定更换起跑脚”，这些生动的例子不仅展示了青年的奋斗精神，也体现了作者对青年选择和创新的深刻理解。最后，作者总结了全文的观点，强调了青年的重要性，再次强调了个人的选择和努力对于国家和时代的光明前景的重要性，表达了对青年的鼓励和祝愿，为全文留下深刻的印象。例如，文章结尾“在青春的征途上，让我们不负韶华，不负热爱，共同创造一个辉煌灿烂的未来。”这句话不仅呼应了开头，也强化了文章的主题，使得文章结构完整，中心明确。然而，文章在探讨青年如何创造未来的深度和广度上还有提高空间，需要对青年在当代社会中的更全面角色定位和责任感进行更深入地分析，例如，文章可以进一步探讨青年如何在全球化背景下发挥创新精神，以及如何在多元文化交融中保持文化自信。深度和广度上的缺陷需要各酌情扣2分，共4分。总体来说，内容方面符合二等作文的标准，得分：16分。",
"表达分析：文章的结构严谨，从引言到结尾，每个部分都有明确的主题和支撑点。文章开头通过引用“青年强则国强，时代之希望都在青年”这一观点，不仅为沉默的价值定调，而且巧妙地引入了文章的主题。例如，文章开头的“不负热爱，就要为你的热爱做出最好的选择。”这句话直接回应了题目，明确了青年在选择和热爱之间应当如何取舍。在论述“热爱与创造”的关系时，文章通过具体的例子，如“钟南山选择了热爱的医疗事业，苏炳添在百米短跑项目上不断奋斗”，这些例子生动展示了热爱如何转化为实际行动，从而推动个人和社会的进步。文章在语言运用上，如“不负韶华，不负热爱，共同创造一个辉煌灿烂的未来。”运用了比喻手法，增强了语言的形象性和感染力。此外，文章在表达上还体现了一定的文采，如在探讨青年的责任感时，引用了“青年胸无大志，则国之光明不可期；青年热血沸腾，奋发有为，则国之未来无限光明。”这句话，不仅丰富了文章的内容，也提升了文章的文化层次。然而，文章在论证层次上略显不足，未能充分展现事物的内在因果关系，需要扣掉3分。例如，在讨论青年如何通过热爱和创造影响未来时，文章可以更深入地分析这种影响的具体机制和可能的挑战。文章采用了议论文的形式，文体规范，符合高考作文的要求，适合题目的文体定位。但在议论文的逻辑严密性和层次分明方面略显不足，文章需要引入更多对比分析、因果论证等方法来增强论证的深度，逻辑层次上的不足需要扣掉2分。文章语言流畅，运用排比、比喻、设问等修辞手法生动形象地强调了作者的观点，增强了语言的表现力和感染力，使得语言较为优美、生动，有非常强的表现力和语言张力。在内容等级判分的基础上，表达项可以在二等至三等给分。由于内容评分为16分，属于二等，表达项原则上不跨等给分，因此表达项的评分应在二等到三等之间。综合考虑文章在结构、语言和修辞方面的整体表现，最终确定为二等得分，得分：15分。",
"发展分析：文章在深刻性、丰富性、文采和创意方面表现良好。文章以"青年强则国强，时代之希望都在青年"作为开篇，引出了文章的主题，即青年的重要性以及他们在国家发展中的角色。这一引言引人入胜，激发了读者的兴趣。文章采用了多个生动的例子，如钟南山、苏炳添、袁隆平等，来支持文章的观点。这些例子是杰出的个人事例，有助于增加文章的说服力和可信度。例如，文章中提到“钟南山挺身而出，毅然决然地选择奔赴疫情的重灾区——武汉”，这一细节不仅展示了钟南山的个人品质，也反映了青年在国家危机时刻的担当。文章的主题线索清晰，分为不负热爱、选择决定人生、不断创造和青年胸无大志这四个方面进行展开。每个方面都有明确的段落，有助于读者理解和跟随文章的逻辑结构。文章以鼓舞人心的结尾结束，表达了对青年的鼓励和祝愿，给人以积极的启发和反思，深刻揭示了青年选择与创造未来的重要性。例如，文章结尾的“愿诸位共勉！”这句话不仅呼应了开头，也强化了文章的主题，使得文章结构完整，中心明确。然而，文章在推理和想象方面的表现尚有提升空间，例如需要进一步探讨青年如何在全球化背景下发挥创新精神，以及如何在多元文化交融中保持文化自信，因此需要酌情扣掉1分。文章的构思精巧，推理合理，展示了作者独特的思考角度。例如，文章通过对比不同时代青年的奋斗，展示了时代变迁对青年角色的影响。在材料选择上，文章选择了具有时代意义的人物和事件，如苏炳添的奥运成就，这不仅展示了青年的成就，也体现了时代的进步。文章在文采方面，通过使用比喻、排比等修辞手法，如“不负韶华，不负热爱”，增强了语言的艺术感，使得文章读起来更加生动和引人入胜。在创意方面，文章将青年的个人选择与国家的未来紧密联系起来，提出了青年应如何通过个人努力影响国家发展的新视角。综合考虑，发展方面可以给予一等到二等的评分。因此，发展得分：19分。",
"扣分项分析：范文1没有出现错别字、标点符号错误等明显问题，字数共871字，符合800字的最低要求。总体来说，无需扣分。",
"综上所述，根据评分规则，凡说理表达基本过关、观点基本突出、材料基本充实的议论类文章，可以按48—52分档次赋分，因此本文内容16分，表达15分，发展19分，总分：50分。"
],
"result": 50
}
"""
def get_wc_compare_results(s):
      wc = len(s)
      if wc > 800:
            return "超过800字的最低要求"
      else:
            return "未达到800字的最低要求"
        

with open("prediction.jsonl", "r") as f:
  dataset = list(jsonlines.Reader(f))

# original
query_list = [item['query'].strip() for item in dataset]
response_list = [item['response'].strip() for item in dataset]

eval_templates = [eval_template.replace('[[TIMU0]]',query_list[i]).replace('[[FANWEN0]]', response_list[i]).replace("[[WC]]", str(len(response_list[i]))).replace("[[WC_RESULT]]", get_wc_compare_results(response_list[i])) for i in range(len(query_list))]
eval_response_list = threading_query(eval_templates, query_function=get_response, ERROR_LENGTH=1)

with open("eval_result.jsonl", "w") as g:
    for i in range(len(query_list)):
        jsonlines.Writer(g).write({"query": query_list[i], "response": response_list[i], "eval_response": eval_response_list[i]})